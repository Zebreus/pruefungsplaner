---
platform: linux

image_resource:
  type: registry-image
  source:
    repository: madmanfred/qt-webassembly
    tag: "qt5.15-em1.39.7"

inputs:
  - name: pruefungsplaner-frontend
    optional: false

outputs:
  - name: built-frontend

params:
  optimization_level: 0
  make_threads: 4

caches:
 - path: /emsdk_portable/.data/cache

run:
  path: /qt-webassembly/entrypoint
  args: ["bash", "./concourse/build-wasm.sh"]
  dir: ./pruefungsplaner-frontend
