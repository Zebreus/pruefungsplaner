---
platform: linux

image_resource:
  type: registry-image
  source:
    repository: madmanfred/qt-webassembly
    tag: "qt5.15-em1.39.7"

inputs:
  - name: pruefungsplaner-frontend
    optional: false

outputs:
  - name: built-frontend

params:
  optimization_level: 0

caches:
 - path: /emsdk_portable/.data/cache

run:
  path: /qt-webassembly/entrypoint
  args: ["qmake", "pruefungsplaner.pro", "QMAKE_CXXFLAGS_RELEASE='-O${optimization_level}'", "QMAKE_LFLAGS_RELEASE='-O${optimization_level}'", "DESTDIR='../built-frontend'", "&&", "make -j4"]
  dir: ./pruefungsplaner-frontend
